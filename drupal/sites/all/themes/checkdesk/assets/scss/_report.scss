// Report 
//
// When a link is received we convert it into an embedded media "report"
//
// Compatibility: untested

// Checkdesk report
.report {
	// @include span-columns($cw, $cw); // default is full width
	// width: 100%; //default
	font-family: $sans-font-family;
	background-color: lighten($grayLighter, 5%);
	margin: { top: $gw; bottom: $gw; }
	min-width: 240px;

	a {
		color: black;
		&:hover {
			color: $twitter-blue;
		}
	}

	& > header {
		@include clearfix;
		// background: top $from-direction repeat url("/sites/all/themes/bowerbird/images/bkgs/arches.png");
		color: $gray;
		// @include span-columns($rw, $rw, $gw);
		padding: 5px;

		h3 {
			font-size: $small-font-size;
			line-height: $small-font-size * 1.2;
			overflow: hidden;
			// padding: $base-font-size 0;
			margin: 0;
			display: inline-block;
			.source-url {
				font-weight: normal;
				font-size: inherit;
				line-height: inherit;
				overflow: inherit;
				// padding-#{opposite-position($from-direction)}: $gw;
				display: inherit;
			}
		}

		.report-actions {
			@include reset-box-model;
			@include reset-list-style;
			font-size: $small-font-size;

			& > li {
				display: block;
				float: $from-direction;
				& > a {
					@include reset-box-model;
					display: block;
					padding: 1em 0;
					
					@include transition-property(color);
			    @include transition-duration(0.2s);
				  &:hover { 
			    	color: black;
			    	text-decoration: none;
			    }

					span {
						float: $from-direction;
						@include reset-box-model;
						&.icon-edit {
							@include icon(edit, fontawesome, 16px, $darker-grey, transparent);
						}

						// Flag and share on the top of the report
						&.icon-flag {@include icon(flag, 16px, $darker-grey); } 
						&.icon-share {@include icon(share, 16px, $darker-grey); }
						&.icon-edit {@include icon(edit, 16px, $darker-grey); }
					}
				}
				// hide ajax throbber in dropdown
		    .ajax-progress-throbber {
		    	display: none;
		  	}
			}
		}
	}

	// Hmmm...	
	// .node-media.node-promoted {
	// 	@include icon("star");
	// }

	// Need more icons!
	// h3 a[href*="flickr.com"] {
	// 	@include icon('flickr');
	// }

	// Twitter reports icon in header
	h3 > a[href*="twitter.com"] { 
		@include icon('twitter');
		&:before {
			display: inline-block;
			@include transform(rotate(-19deg)); // new twitter logo :)
		}
	}

	// Twitter reports icon in header
	h3 > a[href*="youtube.com"] { 
		@include icon('youtube');
	}


	// Twitter profile images
	// a[href*="twitter.com"]	{
	// 	img {
	// 		width: 50px; // profile of user
	// 	}
	// }

	div.sensitive-hide {
	  display: hidden;
	}

	.report-content {
		color: $gray;
		// background-color: darken($grayLighter, 5%);
		// @include span-columns($rw, $rw);
		padding: $gw;
		.report-media {
			// What is this for?  - CGB
			/* The ghost, nudged to maintain perfect centering */
			.report-media:before {
				content: '';
				display: inline-block;
				height: 100%;
				vertical-align: middle;
				margin-right: -0.25em; /* Adjusts for spacing */
			}

			.container {
				display: inline-block;
				vertical-align: middle;
				text-align: $from-direction;
				font-size: $small-font-size;

				// & > div {
				// 	margin: 0;
				// }
				
				.oembed-content img {
					width: $report-width-px; // enlarge photos to fit ...
				}

				.thumbnail img {
					width: auto;
					padding: $gw;
				}

				.oembed-title {
					display: none;
				}
				
				.title {
					padding: 0;
					font-size: $small-font-size;
				}
				
				.content {
					padding: 0;
				}
				
				.favicon, 
				.author-img {
					float: $from-direction;
					padding: 0 $gw/2;
					width: auto;
				}
				
				.domain {
					margin-bottom: $baseLineHeight;
				}

				img,
				embed,
				object,
				video,
				iframe {
					max-width: 100%;
				}

				.sensitive-notification {
					display: table-cell;
					width: 400px;
			    height: 200px;
			    text-align: center;
			    vertical-align: middle;
			    background: none !important;
			    .sensitive-notification-text {
			    	color: $grayDark;
			    	padding: $baseLineHeight/2 $gw/2;
			    }
			    .sensitive-notification-link {
			    	padding: $baseLineHeight/2 $gw/2;
			    	a {
			    		@include button($grayLight, 18px);
			    	}
			    }
				}
			}
		}

		& > p {
			@include ctb-clearfix;
			padding: $baseLineHeight/2.8 $gridGutterWidth/2 $baseLineHeight/2 $gridGutterWidth/2;
			border-bottom: 1px solid rgba($white, 0.7);
			font-size: $small-font-size;
		}

		.gravatar {
			img {
				vertical-align: text-bottom;
				@include ctb-square(20px);
				margin-right: $gridGutterWidth/3;
			}	
		}

		.description {
			@include ctb-font-shorthand(14px, normal);
			padding: 0 $gridGutterWidth/2 0 40px;
			background-repeat: no-repeat;
			background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAATBAMAAABvvEDBAAAAA3NCSVQICAjb4U/gAAAAMFBMVEX///////////////////////////////////////////////////////////////9Or7hAAAAAEHRSTlMAESIzRFVmd4iZqrvM3e7/dpUBFQAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAAWdEVYdENyZWF0aW9uIFRpbWUAMTAvMTMvMTIKtzHNAAAAb0lEQVQIma2MwQ2CUBBE3+cgkViBFyzFDrQDKkBKgA6gEznSxW+BaAEeOCBexoEamGQnb7OzAyQDVul5fG1nwUGmEE2FZsgkwkcN1Hpz1I91vZLrBakWqNTBSRM8dceHEaIucFMPfl8jG7m5te9DfyQZZNhMbKspAAAAAElFTkSuQmCC);
			background-position: 10px 0;
		}

	}

	.report-activity {

		& > header {
			@include clearfix();
			padding: $gw;
			// text-shadow: 0 1px 0 rgba(255,255,255,.3);
			cursor: pointer;
			font-size: $small-font-size;
			h3 {
				float: $from-direction;
				@include reset-box-model();
				font-size: $small-font-size;
				display: inline-block;
				font-family: $sans-font-family;
				font-weight: normal;
				color: rgba(black, 0.8);
				padding: 0;
			}
			.report-status {
				float: opposite-position($from-direction);
				text-align: opposite-position($from-direction);
				// icon in the status
				span[class^="icon-"], span[class*="icon-"] {
					// width: 20px;
					float: opposite-position($from-direction);
				}
				span.status-name {
					text-align: opposite-position($from-direction);
					overflow: visible;
					margin-#{opposite-position($from-direction)}:5px; 
				}
			}
			&:hover {
				background-color: darken($grayLighter, 10%);
			}
		}
		// header status
		& > .undetermined {
			background-color: lighten($orange, 40%);
			a { color: darken($orange, 10%); }
			&:hover {
				background-color: lighten($orange, 30%);
				a {	color: darken($orange, 20%); }
			}
		}
		& > .verified {
			background-color: lighten($green, 50%);
			a { color: $green; }
			&:hover {
				background-color: lighten($green, 40%);
				a {	color: darken($green, 10%); }
			}
		}	
		& > .false {
			background-color: lighten($red, 50%);
			a { color: $red; }
			&:hover {
				background-color: lighten($red, 40%);
				a {	color: darken($red, 10%); }
			}
		}

		.activity-wrapper {
			display: none;
		}

		.activity-list {
			@include reset-list-style;
			@include reset-box-model;
			background-color: lighten($grayLighter, 5%);
			li {
				@include clearfix;
				border-#{$from-direction}: 2px solid $white;
				color: $gray;
				padding-bottom: $base-font-size;
				header {	
					line-height: $base-line-height;
					.time {
						color: $grayLight;
					}
					.title {
						float: $from-direction;
						clear: both;
					}
					a {
						font-weight: bold;
					}
				}
				.message {
					margin-top: $baseLineHeight/2.8;
					padding: $baseLineHeight/2.8 $gridGutterWidth/2;
					background-color: $white;
					@include border-radius(4px);
					& > p {
						@include reset-box-model;
					}
				}
			}
		}

		#comment-form {
			@include clearfix;
			padding: 0 $gridGutterWidth/2;
			background-color: $grayLighter;
			label {
				display: none;
			}
		}

		& > footer {
			color: $grayLight;
			// padding: $gw;
			font-size: $small-font-size;
		}
	}
	// toggle states
	.open > .false {
		background-color: lighten($red, 40%);
	}
	.open > .undetermined {
		background-color: lighten($orange, 30%);
		a {	color: darken($orange, 20%); }
	}
	.open > .verified {
		background-color: lighten($green, 40%);
	}

	// based on status
	.icon-ok-sign { 
		color: red;
		@include icon(ok-sign, 16px, darken($green, 15%));
	}
	.icon-question-sign { 
		color: $orange; 
		@include icon(remove-sign, 16px, darken($orange, 15%));
	}
	.icon-remove-sign { 
		color: $red; 
		@include icon(question-sign, 16px, darken($red, 15%));
	}
}


// ========================================================================
// Responsive layouts 
//
// .report header {
//   .report-actions {
//     @include span-columns($rw, $rw); 
//   }

//   h3 {
//     @include span-columns($rw, $rw);
//   }
// }
