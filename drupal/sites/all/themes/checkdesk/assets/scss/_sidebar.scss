// Page with a sidebar
// Implementations: The story page as seen by a journalist (create update)
//
// By default, there is only one column.
// In larger breakpoints the primary width $pw and secondary $sw diverge to create two columns.
@mixin cd-sidebar($sw, $pw, $break: $cw) {

  body.sidebar-first {
    #main {
      @include span-columns($break, $break); //outermost container
      @include pad(0,0, $break); // override story.scss
      @content;

      // 2. The sidebar column
      #sidebar-first.column {
        @include span-columns($sw, $break); // sidebar width
        @include cd-box-shadow();
        background-color: white;
        margin-#{$omega}: 0;
      }

      // 3. The primary content column with compser form
      div#content .inner {
        @include span-columns($pw omega, $break);
        @include pad(0,0, $break);
        margin-top: $base-font-size;
      }
    }
  }
}

// ==========================================================================
// Default: up to break-small
@include cd-sidebar($cw, $cw); // full width for secondary and primary cols

// ==========================================================================
// Breakpoint: small
@include at-breakpoint($break-small) {
  $break: $break-small;
  $sw: 4;
  $pw: $break-small - $sw;

  body.sidebar-first #main {
    @include span-columns($break, $break); //reset to full
    @include pad(0, 0); //reset to no pad 
  }

  @include cd-sidebar($sw, $pw, $break); // reapply cd-sidebar
}
// ======================================================================
// Breakpoint: med
//
// The sidebar doubles in width and the primary form widens

@include at-breakpoint($break-medium) {
  $break: $break-medium;
  $sw: 10; // double the sidebar width
  $pw: $break-medium - $sw; 

  @include cd-sidebar($sw, $pw, $break) {
    @include span-columns($break, $break); //reset container to full
    @include pad(0, 0); //reset container padding
  }
}  
// Breakpoint: large
@include at-breakpoint($break-large) {
  $break: $break-large;
  $sw: 7;
  $pw: $break-large - $sw;
  body.sidebar-first #main {
    @include span-columns($break, $break); // reset to full
    @include pad(0, 0, $break); // reset to zero
  }
  @include cd-sidebar($sw, $pw, $break); // reapply cd-sidebar with new break
}


// incoming reports 
// inside the sidebar
#incoming-reports {
  @include ctb-clearfix;
  font-family: $sans-font-family;
  font-size: $fontSizeSmall;
  padding: 0 $gw*2;
  color: $gray;

  .report-row {
    @include ctb-clearfix;
    position: relative;

    .report-row-container {
      cursor: pointer;
      padding: $baseLineHeight/2 $gw;
      border-top: 1px solid $white;
      border-right: 1px solid $white;
      border-left: 1px solid $white;
      border-bottom: 1px solid $grayLighter;
      @include ctb-bg(#fff, rgba(255, 255, 255, 0.6));
      @include ctb-transition(opacity 0.3s linear);
    }

    // for tweets
    .twitter_com {
      @include ctb-bg($grayLighter, rgba(238, 238, 238, 0.9));
    }


    .report-content {
      @include ctb-clearfix;
      // thumbnail type
      .report-type-thumbnail {
        max-width: 270px;
        .report-thumbnail img {
          @include ctb-opacity(.9);
        }
        .report-title {
          font-size: $fontSizeSmall;
        }
      } // thumbnail type

      .report-type-twitter {
        
      } // twitter
    } // report content

    .report-status {

    }

    .report-detail-link {
      a {
        @include checkdesk-button($grayLight);
        @include button-size(13px);
      }
    }

    // hover
    &:hover {
      color: $grayDark;
      .report-row-container {
        position: static;
        $bw: 4px;
        border: $bw solid $warningBorder;
        background-color: $warningBackground;
        margin-top: -$bw;
        margin-#{$alpha}: -$bw;
      } 

      .report-content .report-thumbnail img {
        @include ctb-opacity(1);
      }

    } // hover
  } // report row

  // while dragging
  .ui-draggable-dragging {
    // z-index: 1;
    .report-row-container {
      
    }
  }

  // no reports
  .view-empty {
    clear: both;
    float: $alpha;
    font-style: italic;
    padding: $gw;
    color: $grey;
  }
} // incoming reports

