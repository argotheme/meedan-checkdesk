/*! checkdesk - v0.1.0 */
var app=angular.module("Checkdesk",["pascalprecht.translate","cdTranslationUI","Checkdesk.services"]),appServices=angular.module("Checkdesk.services",["ngResource"]);app.config(["$routeProvider","$locationProvider",function(e,r){r.html5Mode(!0).hashPrefix("!"),e.when("/reports",{templateUrl:"templates/reports.html",controller:ReportsCtrl}),e.when("/report/add",{templateUrl:"templates/reportForm.html",controller:ReportFormCtrl}),e.when("/report/:nid",{templateUrl:"templates/report.html",controller:ReportCtrl}),e.when("/report/:nid/edit",{templateUrl:"templates/reportForm.html",controller:ReportFormCtrl}),e.when("/translationsTest",{templateUrl:"templates/translationsTest.html",controller:TranslationsTestCtrl}),e.otherwise({redirectTo:"/reports"})}]),app.config(["$translateProvider",function(e){e.translations("en_EN",{CALL_TO_ACTION_HEAD:"Help verify this report",CALL_TO_ACTION_TEXT:"Checkdesk is a collaborative space for journalist led and citizen participating fact-checking.",LANGUAGE_TOGGLE:"Switch to Arabic",WELCOME_USER:"Welcome, {{name}}",LOGOUT:"Logout",USER_NAME:"User name",PASSWORD:"Password",LOG_IN:"Log in",BOTTOM_CONTENT_GOES_HERE:"Bottom content goes here.",REALLY_BOTTOM_CONTENT_GOES_HERE:"Really bottom content goes here.","#_FACT_CHECKING_FOOTNOTES":"{{num}} fact-checking footnotes",VERIFIED:"Verified",CREATE_NOTE:"Create note",PEOPLE_HELPING_VERIFY_THIS_REPORT:"People helping verify this report:","#_JOURNALISTS":"{{num}} journalists","#_CITIZENS":"{{num}} citizens",CHANGED_STATUS_TO_VERIFIED:"Changed status to verified","#_MINUTES_SHORT":"{{num}}m","#_HOURS_SHORT":"{{num}}h",LOREM_IPSUM:"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.",CHANGED_STATUS_TO:"Changed status to",UNDETERMINED:"Undetermined",LOAD_MORE:"Load more"}),e.translations("ar_AR",{CALL_TO_ACTION_HEAD:"مساعدة في التحقق من هذا التقرير",CALL_TO_ACTION_TEXT:"Checkdesk هو مساحة تعاونية للصحفي ومواطن قاد المشاركة تدقيق الحقائق.",LANGUAGE_TOGGLE:"التبديل إلى الإنجليزية",WELCOME_USER:"أهلا، {{name}}",LOGOUT:"تسجيل الخروج",USER_NAME:"اسم المستخدم",PASSWORD:"كلمة السر",LOG_IN:"تسجيل الدخول",BOTTOM_CONTENT_GOES_HERE:"محتوى أسفل يذهب هنا.",REALLY_BOTTOM_CONTENT_GOES_HERE:"محتوى أسفل حقا يذهب هنا.","#_FACT_CHECKING_FOOTNOTES":"{{num}} الحواشي تدقيق الحقائق",VERIFIED:"التحقق",CREATE_NOTE:"إنشاء حاشية",PEOPLE_HELPING_VERIFY_THIS_REPORT:"الناس الذين يساعدون تحقق من هذا التقرير:","#_JOURNALISTS":"{{num}} الصحفيين","#_CITIZENS":"{{num}} مواطنا",CHANGED_STATUS_TO_VERIFIED:"تغيرت الحالة إلى <em>التحقق</em>","#_MINUTES_SHORT":"{{num}} دقيقة","#_HOURS_SHORT":"{{num}} ساعات",LOREM_IPSUM:"غريمه وحلفاؤها تعد من, جُل لم الذود السبب الأمامية, وبعض شمال فمرّ بحث لم. مما أمدها الأرواح بـ, بالقصف اتفاقية لبولندا بـ حشد, سقط أم الذود للصين للألمان.","CHANGED_STATUS_TO_*":"تغيرت الحالة إلى",UNDETERMINED:"غير محدد",LOAD_MORE:"تحميل أكثر"}),e.uses("ar_AR"),e.useMissingTranslationHandler("cdTranslationUI")}]),angular.module("cdTranslationUI",[]).provider("cdTranslationUI",function(){var e,r=[],t=function(e){-1===r.indexOf(e)&&r.push(e)};this.translationTable=function(r){return angular.isUndefined(r)||(e=r),e},this.missingTranslations=function(){return r},t.translationTable=this.translationTable,t.missingTranslations=this.missingTranslations,this.$get=function(){return t}}).config(["$translateProvider","cdTranslationUIProvider",function(e,r){r.translationTable(e.translations())}]).controller("cdTranslationUICtrl",["$scope","$translate","cdTranslationUI",function(e,r,t){e.collapsed=!0,e.toggle=function(){e.collapsed=!e.collapsed},e.translationTable=t.translationTable(),e.missingTranslations=t.missingTranslations(),e.inputTranslations=[],e.currentLanguage=r.uses(),e.translationChanged=function(t){var n=r.uses(),a=e.missingTranslations[t],o=e.inputTranslations[t];e.translationTable[n][a]=o,r.uses(n)}}]),appServices.factory("Comment",["$resource",function(e){return e("api/node/:nid/comments",{},{query:{method:"GET",isArray:!0}})}]),appServices.factory("Report",["$resource","$http",function(e){var r=e("api/node/:nid",{nid:"@nid"},{query:{method:"GET",params:{nid:"","parameters[type]":"media",pagesize:5},isArray:!0},get:{method:"GET",isArray:!1},save:{method:"POST",params:{nid:""}},update:{method:"PUT"}});return angular.extend(r.prototype,{save:function(e){return this.nid?this.$update(e):this.$save(e)}}),r}]),appServices.factory("ReportActivity",["$resource",function(e){return e("api/views/activity_report",{},{query:{method:"GET",params:{display_id:"page_1",args:[]},isArray:!0}})}]),appServices.factory("System",["$resource",function(e){return e("api/system/:verb",{},{connect:{method:"POST",params:{verb:"connect"},isArray:!1}})}]),appServices.factory("Translation",["$resource","$http",function(e){var r=e("api/i18n/:lid",{lid:"@lid"},{query:{method:"GET",params:{lid:"",textgroup:"ui"},isArray:!0},save:{method:"POST",params:{lid:""}},update:{method:"PUT"},remove:{method:"DELETE"}});return angular.extend(r.prototype,{save:function(e){return this.lid?this.$update(e):this.$save(e)}}),r}]),appServices.factory("User",["$resource","$http",function(e,r){return e("api/user/:verb",{},{login:{method:"POST",params:{verb:"login"},isArray:!1},logout:{method:"POST",params:{verb:"logout"},isArray:!1,transformResponse:r.defaults.transformResponse.concat([function(e){return angular.isArray(e)&&e.length>0?{result:e[0]}:{result:!1}}])}})}]);var HeaderCtrl=["$scope","$translate","System","User",function(e,r,t,n){var a=function(e,r){switch(e){case"remove":$("html").removeClass(r);break;case"add":$("html").addClass(r)}};a("add",r.uses()),e.toggleLang=function(){a("remove",r.uses()),"en_EN"===r.uses()?r.uses("ar_AR"):r.uses("en_EN"),a("add",r.uses())};var o={uid:0};e.isLoggedIn=!1,e.user=angular.copy(o),t.connect({},function(r){e.user=r.user,e.isLoggedIn=!angular.isUndefined(r.user)&&r.user.uid>0}),e.login=function(){return e.user.name&&e.user.pass?(e.user&&0!==e.user.uid||n.login({username:e.user.name,password:e.user.pass},function(r){e.user=r.user,e.isLoggedIn=!angular.isUndefined(r.user)&&r.user.uid>0}),void 0):!1},e.logout=function(){n.logout({},function(r){r.result&&(e.user=angular.copy(o),e.isLoggedIn=!1)})}}];app.controller("HeaderCtrl",HeaderCtrl);var ReportCtrl=["$scope","$routeParams","Report","ReportActivity",function(e,r,t,n){e.report=t.get({nid:r.nid}),e.reportActivity=n.query({args:[r.nid]})}];app.controller("ReportCtrl",ReportCtrl);var ReportFormCtrl=["$scope","$routeParams","$location","Report",function(e,r,t,n){e.report=r.nid?n.get({nid:r.nid}):new n({title:"",type:"media",body:{und:[{url:""}]},field_link:{und:[{url:""}]}}),e.submit=function(){return e.report.save(function(e){t.path("/report/"+e.nid)}),!1},e.cancel=function(){r.nid?t.path("/report/"+r.nid):t.path("/")}}];app.controller("ReportFormCtrl",ReportFormCtrl);var ReportsCtrl=["$scope","Report",function(e,r){e.reports=[],r.query(function(t){for(var n=0;t.length>n;n++)e.reports.push(r.get({nid:t[n].nid}))})}];app.controller("ReportsCtrl",ReportsCtrl);var TranslationsTestCtrl=["$scope","$translate","Translation",function(e,r,t){e.translations=t.query({language:r.uses()}),e.translation=new t({language:"",context:"",source:"",translation:"",textgroup:"",location:"",plid:"",plural:""}),e.submit=function(){return e.translation.save(),!1}}];app.controller("TranslationsTestCtrl",TranslationsTestCtrl);