From b72f3919288b55d6e8774bbbea747b8608233b27 Mon Sep 17 00:00:00 2001
From: Caio SBA <caiosba@gmail.com>
Date: Sun, 17 Feb 2013 23:22:49 -0300
Subject: [PATCH 1/3] Check if original view data is related to the view

---
 views_autorefresh/views_autorefresh.module |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/views_autorefresh/views_autorefresh.module b/views_autorefresh/views_autorefresh.module
index b1d8ec6..131087f 100644
--- a/views_autorefresh/views_autorefresh.module
+++ b/views_autorefresh/views_autorefresh.module
@@ -108,7 +108,7 @@ function __views_autorefresh_get_timestamp($view) {
  * FIXME: Check if it's necessary to reset any further information
  */
 function views_autorefresh_views_pre_render(&$view) {
-  if (isset($_REQUEST['original_view_data']) && !empty($_REQUEST['original_view_data']['view_display_id'])) {
+  if (isset($_REQUEST['original_view_data']) && !empty($_REQUEST['original_view_data']['view_display_id']) && isset($_REQUEST['original_view_data']['view_dom_id']) && $_REQUEST['original_view_data']['view_dom_id'] == $view->dom_id) {
     $view->current_display = $_REQUEST['original_view_data']['view_display_id'];
   }
 }
-- 
1.7.2.5

